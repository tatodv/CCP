<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      Teatro Centro Cultural Plaza de San Martín - Plano de Asientos
    </title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/17.0.2/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/17.0.2/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
      @media print {
        body { 
          -webkit-print-color-adjust: exact !important;
          print-color-adjust: exact !important;
        }
        .no-print {
          display: none !important;
        }
        .page-break {
          page-break-before: always;
        }
      }
    </style>
  </head>
  <body class="bg-gray-100">
    <header class="bg-blue-800 text-white p-4 print:bg-blue-800 print:text-white">
      <h1 class="text-3xl font-bold text-center">
        Teatro Centro Cultural Plaza de San Martín
      </h1>
    </header>

    <main class="container mx-auto p-4">
      <section class="mb-8 no-print">
        <h2 class="text-2xl font-semibold mb-4">Plano de Asientos</h2>
        <p class="text-gray-700 mb-4">
          Seleccione los asientos para ver su disponibilidad. Los asientos en
          rojo están ocupados o seleccionados. Los asientos VIP tienen campos para nombre y apellido en la columna
          derecha.
        </p>
      </section>

      <section id="plano-teatro" class="mb-8"></section>

      <section class="mb-8 no-print">
        <h3 class="text-xl font-semibold mb-2">Información del Teatro</h3>
        <p class="text-gray-700">
          El Teatro Centro Cultural Plaza de San Martín es un espacio
          emblemático dedicado a las artes escénicas y la cultura. Ofrecemos una
          variedad de espectáculos que incluyen teatro, danza, música y más.
        </p>
      </section>
    </main>

    <footer class="bg-gray-200 p-4 text-center text-gray-600 print:bg-gray-200 print:text-gray-600">
      <p>
        &copy; 2024 Teatro Centro Cultural Plaza de San Martín. Todos los
        derechos reservados.
      </p>
      <p>
        Dirección: [Insertar dirección aquí] | Teléfono: [Insertar teléfono]
      </p>
    </footer>

    <script type="text/babel">
      const Teatro = () => {
        const [asientosPB, setAsientosPB] = React.useState({});
        const [asientosPA, setAsientosPA] = React.useState({});
        const [vipNombresPB, setVipNombresPB] = React.useState({});
        const [vipNombresPA, setVipNombresPA] = React.useState({});
        const planoRef = React.useRef(null);

        // ... (el resto de las constantes y funciones se mantienen igual)

        const imprimirPlano = () => {
          window.print();
        };

        const guardarComoJPG = () => {
          const scale = 2; // Aumenta la escala para mejor calidad
          html2canvas(planoRef.current, {
            scale: scale,
            useCORS: true,
            logging: false,
            windowWidth: planoRef.current.scrollWidth * scale,
            windowHeight: planoRef.current.scrollHeight * scale
          }).then((canvas) => {
            const link = document.createElement('a');
            link.download = 'plano-teatro.jpg';
            link.href = canvas.toDataURL('image/jpeg', 1.0);
            link.click();
          });
        };

        return (
          <div ref={planoRef} className="max-w-full mx-auto bg-white shadow-lg rounded-lg overflow-hidden p-4 print:shadow-none print:rounded-none">
            <div className="mb-4 flex justify-end space-x-4 no-print">
              <button onClick={imprimirPlano} className="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
                Imprimir Plano
              </button>
              <button onClick={guardarComoJPG} className="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded">
                Guardar como JPG
              </button>
            </div>

            <h2 className="text-2xl font-bold text-center my-4">PLANTA BAJA</h2>
            <div className="w-full h-8 bg-gray-800 mb-4 print:bg-gray-800"></div>
            <div className="flex flex-col lg:flex-row">
              <div className="flex-grow mb-4 lg:mb-0">
                <div className="flex flex-col md:flex-row justify-between">
                  {renderSeccion('PB', "Izquierda", seccionesPB.izquierda)}
                  {renderSeccion('PB', "Centro", seccionesPB.centro)}
                  {renderSeccion('PB', "Derecha", seccionesPB.derecha)}
                </div>
                <div className="mt-4 text-center">Cabina de Luces y Sonido</div>
              </div>
              {renderVipSection('PB')}
            </div>

            <div className="page-break"></div>

            <h2 className="text-2xl font-bold text-center my-8">PLANTA ALTA</h2>
            <div className="w-full h-8 bg-gray-800 mb-4 print:bg-gray-800"></div>
            <div className="flex flex-col lg:flex-row justify-center">
              <div className="flex-grow mb-4 lg:mb-0">
                <div className="flex flex-col md:flex-row justify-center space-x-8">
                  {renderSeccion('PA', "Izquierda", seccionesPA.izquierda)}
                  {renderSeccion('PA', "Derecha", seccionesPA.derecha)}
                </div>
              </div>
              {renderVipSection('PA')}
            </div>
          </div>
        );
      };

      ReactDOM.render(<Teatro />, document.getElementById("plano-teatro"));
    </script>
  </body>
</html>
